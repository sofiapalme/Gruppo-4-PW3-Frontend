<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/dashboardReceptionist.css" />
    <link rel="stylesheet" href="css/miniDatatableHome.css" />
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.dataTables.css">
    <title>Dashboard</title>
    <style>
        .section {
            display: none;
        }
    </style>
</head>

<body>
    <div id="delete-modal">
        <div class="modal-content">
            <div id="delete-modal-message">Sei sicuro di voler eliminare questa visita?</div>
            <div class="modal-actions">
                <button class="action-button" id="delete-confirm"
                    style="background:#c0392b;color:#fff;">Elimina</button>
                <button class="action-button" id="delete-cancel">Annulla</button>
            </div>
        </div>
    </div>
    <div class="dashboard">
        <aside class="sidebar">
            <img class="logo" src="assets/logo.png" alt="Logo">
            <nav class="menu">
                <div class="menu-item" id="home">Home</div>

                <div class="menu-item" id="visualizza">
                    <div class="menu-content">
                        Visualizza <span class="arrow"><img src="assets/down_arrow_white_icon.png"
                                alt="Freccia giù"></span>
                    </div>
                    <div class="submenu">
                        <div class="submenu-item" id="visualizza-opzione1">Visualizza - Opzione 1 </div>
                        <div class="submenu-item" id="visualizza-visite">Visite</div>
                        <div class="submenu-item" id="visualizza-presenti">Presenti</div>
                        <div class="submenu-item" id="visualizza-elenco-visite-future">Elenco visite future</div>
                        <div class="submenu-item" id="visualizza-elenco-visite-odierne">Elenco visite odierne</div>
                        <div class="submenu-item" id="visualizza-visite-suo-carico">Visite a suo carico</div>
                        <div class="submenu-item" id="visualizza-presenti-suo-carico">Presenti a suo carico</div>
                        <div class="submenu-item" id="visualizza-futuri-suo-carico">Futuri a suo carico</div>
                        <div class="submenu-item" id="visualizza-elenco-tel-sm">Elenco telefonico sm</div>
                    </div>
                </div>

                <div class="menu-item" id="storico">
                    <div class="menu-content">
                        Storico <span class="arrow"><img src="assets/down_arrow_white_icon.png"
                                alt="Freccia giù"></span>
                    </div>
                    <div class="submenu">
                        <div class="submenu-item" id="storico-timbrature-visitatori">Storico timbrature visite</div>
                        <div class="submenu-item" id="storico-timbrature-dipendenti">Storico timbrature dipendenti</div>
                        <div class="submenu-item" id="storico-timbrature-mensa">Storico timbrature mensa</div>
                    </div>
                </div>

                <div class="menu-item" id="visitatori">
                    <div class="menu-content">
                        Visitatori <span class="arrow"><img src="assets/down_arrow_white_icon.png"
                                alt="Freccia giù"></span>
                    </div>
                    <div class="submenu">
                        <div class="submenu-item" id="visitatori-opzione1">Opzione 1</div>
                        <div class="submenu-item" id="crea-persone">Opzione 2</div>
                    </div>
                </div>
            </nav>

            <!-- TODO: Sistemare il bug della dimensione della user-box e come fare bene la home-->
            <div class="user-box">
                <div class="avatar-bg"></div>
                <img class="avatar" src="assets/utente.png" alt="User Avatar">
                <div class="user-name">Nome e Cognome</div>
                <button class="action-button">Logout</button>
            </div>
        </aside>

        <main class="content-area">
            <section id="home-section" class="section home active">
                <div class="container">

                    <div class="top-section">
                        <div class="top-left">
                            <h1>Home</h1>
                        </div>
                        <div class="top-right">
                            <div class="big-box">
                                <div style="font-size:2.5rem;font-weight:bold;line-height:1;">128</div>
                                <div style="font-size:1rem;">Presenti totali</div>
                            </div>

                            <div class="small-box">
                                <div style="font-size:1.5rem;font-weight:bold;">85</div>
                                <div style="font-size:0.9rem;">Dipendenti</div>
                            </div>
                            <div class="small-box">
                                <div style="font-size:1.5rem;font-weight:bold;">43</div>
                                <div style="font-size:0.9rem;">Visitatori</div>
                            </div>
                            <div class="big-box create-user-box">
                                <div style="font-size:1.3rem;font-weight:bold;margin-bottom:0.5rem;">Crea utente</div>
                                <button class="action-button mini-link" type="button"
                                    onclick="showSection('visitatori-opzione1-section')">Vai</button>
                            </div>
                        </div>
                    </div>

                    <div class="bottom-section">
                        <div class="box">
                            <h3>Visitatori oggi</h3>
                            <table id="home-table1" class="display mini-datatable">
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>Cognome</th>
                                        <th>Data inizio</th>
                                        <th>Ora inizio</th>
                                        <th>Data fine</th>
                                        <th>Ora fine</th>
                                        <th>Dettagli</th>
                                    </tr>
                                </thead>
                                <tbody id="home-table1-body">
                                    <!-- Popolato dinamicamente -->
                                </tbody>
                            </table>
                            <button class="action-button mini-link" type="button"
                                onclick="showSection('visualizza-opzione1-section')">Vai a Visualizza - Opzione
                                1</button>
                        </div>
                        <div class="box">
                            <h3>Visitatori domani</h3>
                            <table id="home-table2" class="display mini-datatable">
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>Cognome</th>
                                        <th>Data inizio</th>
                                        <th>Ora inizio</th>
                                        <th>Data fine</th>
                                        <th>Ora fine</th>
                                        <th>Dettagli</th>
                                    </tr>
                                </thead>
                                <tbody id="home-table2-body">
                                    <!-- Popolato dinamicamente -->
                                </tbody>
                            </table>
                            <button class="action-button mini-link" type="button"
                                onclick="showSection('visualizza-opzione1-section')">Vai a Visualizza - Opzione
                                1</button>
                        </div>
                    </div>
                </div>
            </section>
            <section id="visualizza-opzione1-section" class="section">
                <h2>Visualizza - Opzione 1</h2>
                <table id="table1" class="display custom-table">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Cognome</th>
                            <th>Data inizio</th>
                            <th>Ora inizio</th>
                            <th>Data fine</th>
                            <th>Ora fine</th>
                            <th>Dettagli</th>
                            <th>Elimina</th>
                            <th>Modifica</th>
                            <th>Assegna Badge</th>
                        </tr>
                    </thead>
                    <tbody id="table1-body">
                        <!-- Popolato dinamicamente -->
                    </tbody>
                </table>
                <!-- Modale Dettagli -->
                <div id="dettagli-modal" class="modal"
                    style="display:none;position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;">
                    <div class="modal-content"
                        style="background:#fff;padding:30px 40px;border-radius:18px;min-width:300px;max-width:90vw;max-height:90vh;box-shadow:0 2px 16px #0002;position:relative;">
                        <span id="close-modal"
                            style="position:absolute;top:10px;right:18px;font-size:28px;cursor:pointer;">&times;</span>
                        <h3>Dettagli Visita</h3>
                        <div><b>Azienda:</b> <span id="modal-azienda"></span></div>
                        <div><b>Motivazione:</b> <span id="modal-motivo"></span></div>
                        <div><b>Dipendente:</b> <span id="modal-dipendente"></span></div>
                    </div>
                </div>
                <!-- Modale Modifica -->
                <div id="modifica-modal" class="modal"
                    style="display:none;position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;">
                    <div class="modal-content"
                        style="background:#fff;padding:30px 40px;border-radius:18px;min-width:300px;max-width:90vw;max-height:90vh;box-shadow:0 2px 16px #0002;position:relative;">
                        <span id="close-modifica-modal"
                            style="position:absolute;top:10px;right:18px;font-size:28px;cursor:pointer;">&times;</span>
                        <h3>Modifica Visita</h3>
                        <form id="modifica-form">
                            <input type="hidden" id="modifica-idVisita">
                            <input type="hidden" id="modifica-idPersonaVisitatore">
                            <input type="hidden" id="modifica-idResponsabile">
                            <div class="input-group">
                                <label for="modifica-motivo">Motivo</label>
                                <input type="text" id="modifica-motivo" name="motivo" required>
                            </div>
                            <div class="input-group">
                                <label for="modifica-dataInizio">Data inizio</label>
                                <input type="date" id="modifica-dataInizio" name="dataInizio" required>
                            </div>
                            <div class="input-group">
                                <label for="modifica-oraInizio">Ora inizio</label>
                                <input type="time" id="modifica-oraInizio" name="oraInizio" required>
                            </div>
                            <div class="input-group">
                                <label for="modifica-dataFine">Data fine</label>
                                <input type="date" id="modifica-dataFine" name="dataFine" required>
                            </div>
                            <div class="input-group">
                                <label for="modifica-oraFine">Ora fine</label>
                                <input type="time" id="modifica-oraFine" name="oraFine" required>
                            </div>
                            <div class="button-container">
                                <button type="submit" class="action-button" style="width:100%;">Salva modifiche</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
            <section id="visualizza-opzione2-section" class="section">
                <h2>Visualizza - Opzione 2</h2>
                <p>Contenuto della sezione Visualizza Opzione 2</p>
            </section>

            <section id="storico-opzione1-section" class="section">
                <h2>Storico - Opzione 1</h2>
                <p>Contenuto della sezione Storico Opzione 1</p>
            </section>
            <section id="storico-opzione2-section" class="section">
                <h2>Storico - Opzione 2</h2>
                <p>Contenuto della sezione Storico Opzione 2</p>
            </section>
            <section id="storico-timbrature-visi-section" class="section">
                <h2>Storico timbrature visi</h2>
                <div id="tabella-storico-timbrature-visi"></div>
            </section>
            <section id="storico-timbrature-dip-section" class="section">
                <h2>Storico timbrature dipendenti</h2>
                <div id="tabella-storico-timbrature-dip"></div>
            </section>

            <section id="visitatori-opzione1-section" class="section centered">
                <div class="visitatori-wrapper">
                    <h2>Prenota visita</h2>
                    <div class="form-sezione">
                        <div class="checkbox-row">
                            <input type="checkbox" id="prima-visita">
                            <label for="prima-visita">Prima visita</label>
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label for="nome">Nome</label>
                                <input type="text" id="nome" name="nome">
                            </div>
                            <div class="input-group">
                                <label for="cognome">Cognome</label>
                                <input type="text" id="cognome" name="cognome">
                            </div>
                            <div class="input-group">
                                <label for="azienda">Azienda</label>
                                <input type="text" id="azienda" name="azienda">
                            </div>
                        </div>

                        <div class="input-row left-align">
                            <div class="input-group">
                                <label for="data-inizio">Data inizio</label>
                                <input type="date" id="data-inizio" name="data-inizio">
                            </div>
                            <div class="input-group">
                                <label for="data-fine">Data fine</label>
                                <input type="date" id="data-fine" name="data-fine">
                            </div>
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label for="responsabile">Responsabile visita</label>
                                <input type="text" id="responsabile" name="responsabile">
                            </div>
                            <div class="input-group">
                                <label for="motivo">Motivo visita</label>
                                <input type="text" id="motivo" name="motivo">
                            </div>
                            <div class="input-group">
                                <label for="materiale">Materiale informatico</label>
                                <input type="text" id="materiale" name="materiale">
                            </div>
                        </div>

                        <div class="checkbox-group">
                            <div class="checkbox-row">
                                <input type="checkbox" id="automezzo">
                                <label for="automezzo">Accesso automezzo</label>
                            </div>
                            <div class="checkbox-row">
                                <input type="checkbox" id="dpi">
                                <label for="dpi">Richiesta DPI</label>
                            </div>
                        </div>

                        <div class="button-container">
                            <button class="action-button">Prenota</button>
                        </div>

                    </div>
                </div>
            </section>

            <section id="crea-persone-section" class="section">
                <h2>Crea Persone</h2>

                <form id="personForm">
                    <label>
                        Nome: 
                        <input type="text" name="nome" placeholder="Nome" required />
                    </label
                    ><br />
                    <label>
                        Cognome: 
                        <input type="text" name="cognome" placeholder="Cognome" required />
                    </label>
                    <br />
                    <label>
                        Azienda: 
                        <input type="text" name="azienda" placeholder="Azienda" required />
                    </label>
                    <br />
                    <label>
                        Indirizzo: 
                        <input type="text" name="indirizzo" placeholder="Indirizzo" required />
                    </label>
                    <br />
                    <label>Città: <input type="text" name="citta" placeholder="Città" required /></label><br />
                    <label>Provincia: <input type="text" name="provincia" placeholder="Provincia"
                            required /></label><br />
                    <label>Nazione: <input type="text" name="nazione" placeholder="Nazione" required /></label><br />
                    <label>Telefono: <input type="tel" name="telefono" placeholder="Telefono" /></label><br />
                    <label>Cellulare: <input type="tel" name="cellulare" placeholder="Cellulare" /></label><br />
                    <label>Fax: <input type="text" name="fax" placeholder="Fax" /></label><br />
                    <label>Partita IVA: <input type="text" name="pIva" placeholder="Partita IVA" /></label><br />
                    <label>Codice Fiscale: <input type="text" name="cf" placeholder="Codice Fiscale"
                            required /></label><br />
                    <label>Email: <input type="email" name="mail" placeholder="Email" required /></label><br />
                    <label>Foto: <input type="checkbox" name="foto" /></label> Foto presente<br />
                    <label>Data Assunzione: <input type="date" name="dataAssunzione" /></label><br />
                    <label>Matricola: <input type="text" name="matricola" placeholder="Matricola" /></label><br />
                    <label>ID Filiale: <input type="number" name="idFiliale" placeholder="ID Filiale" /></label><br />
                    <label>ID Mansione: <input type="number" name="idMansione"
                            placeholder="ID Mansione" /></label><br />
                    <label>ID Deposito: <input type="number" name="idDeposito"
                            placeholder="ID Deposito" /></label><br />
                    <label>ID Riferimento: <input type="number" name="idRiferimento"
                            placeholder="ID Riferimento" /></label><br />
                    <label>Visitatore: <input type="checkbox" name="visitatore" /></label> È un visitatore?<br />
                    <label>Access Number: <input type="number" name="accessNumber"
                            placeholder="Access Number" /></label><br />
                    <label>Access Count: <input type="number" name="accessCount"
                            placeholder="Access Count" /></label><br />
                    <label>Access Update: <input type="date" name="accessUpdate" /></label><br />
                    <label>Luogo Nascita: <input type="text" name="luogoNascita"
                            placeholder="Luogo di Nascita" /></label><br />
                    <label>Data Nascita: <input type="date" name="dataNascita" /></label><br />
                    <label>Data Scadenza Certificato: <input type="date" name="dataScadCertificato" /></label><br />
                    <label>Preposto: <input type="checkbox" name="preposto" /></label> Preposto?<br />
                    <label>Antincendio: <input type="checkbox" name="antincendio" /></label> Addetto Antincendio?<br />
                    <label>Primo Soccorso: <input type="checkbox" name="primoSoccorso" /></label> Addetto Primo
                    Soccorso?<br />
                    <label>Tipo Documento: <input type="text" name="tipoDocumento"
                            placeholder="Tipo Documento (es. PATENTE)" /></label><br />
                    <label>Numero Documento: <input type="text" name="numeroDocumento"
                            placeholder="Numero Documento" /></label><br />
                    <label>Data Scadenza Documento: <input type="date" name="dataScadenzaDoc" /></label><br />
                    <label>DUVRI: <input type="text" name="duvri" placeholder="DUVRI" /></label><br />
                    <label>Numero Centri Costo: <input type="number" name="numCentriCosto"
                            placeholder="Numero Centri Costo" /></label><br />
                    <label>Flag Doc Privacy: <input type="checkbox" name="flagDocPrivacy" /></label> Documento Privacy
                    Concesso?<br />
                    <label>Data Consegna Doc Privacy: <input type="date" name="dataConsegnaDocPrivacy" /></label><br />
                    <label>ID Ruolo: <input type="number" name="idRuolo" placeholder="ID Ruolo" /></label><br />

                    <button type="submit">Invia</button>
                </form>

            </section>

            <section id="visualizza-visite-section" class="section">
                <h2>Visite</h2>
                <button class="action-button" id="stampa-visite-oggi">Stampa visite di oggi</button>
                <div id="tabella-visite"></div>
            </section>
            <section id="visualizza-presenti-section" class="section">
                <h2>Presenti</h2>
                <div id="indicatori-presenti"></div>
                <div id="tab-dip-presenti"></div>
                <div id="tab-vis-presenti"></div>
            </section>

            <!-- Tabella visite future -->
            <section id="visualizza-elenco-visite-future-section" class="section">
                <h2>Elenco visitatori futuri</h2>
                <table id="tabella-visite-future" class="table table-striped">
                    <thead>
                        <tr>
                            <th>Data inizio</th>
                            <th>Data fine</th>
                            <th>Ora inizio</th>
                            <th>Ora fine</th>
                            <th>Motivo</th>
                            <th>Visitatore</th>
                            <th>Responsabile</th>
                            <th>Flag DPI</th>
                            <th>Materiale informatico</th>
                            <th>Accesso con Automezzo</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

            <!-- Tabella visite di oggi -->
            <section id="visualizza-elenco-visite-odierne-section" class="section">
                <h2>Elenco visitatori odierni</h2>
                <table id="tabella-visite-odierne" class="table table-striped">
                    <thead>
                        <tr>
                            <th>Data inizio</th>
                            <th>Data fine</th>
                            <th>Ora inizio</th>
                            <th>Ora fine</th>
                            <th>Motivo</th>
                            <th>Visitatore</th>
                            <th>Responsabile</th>
                            <th>Flag DPI</th>
                            <th>Materiale informatico</th>
                            <th>Accesso con Automezzo</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>


            <section id="visualizza-visite-suo-carico-section" class="section">
                <h2>Visite a suo carico</h2>
                <div id="tabella-visite-suo-carico"></div>
            </section>
            <section id="visualizza-presenti-suo-carico-section" class="section">
                <h2>Presenti a suo carico</h2>
                <div id="tabella-presenti-suo-carico"></div>
            </section>
            <section id="visualizza-futuri-suo-carico-section" class="section">
                <h2>Futuri a suo carico</h2>
                <div id="tabella-futuri-suo-carico"></div>
            </section>


            <section id="storico-timbrature-visitatori-section" class="section">
                <h2>Storico timbrature dei visitatori</h2>
                <table id="tabella-timbrature-visitatori" class="table table-striped">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Cognome</th>
                            <th>Azienda</th>
                            <th>Id Badge</th>
                            <th>Codice Badge</th>
                            <th>Id Timbratura</th>
                            <th>Data Timbratura</th>
                            <th>Ora Timbratura</th>
                            <th>Id Timbratrice</th>
                            <th>Descrizione</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

            <section id="storico-timbrature-dipendenti-section" class="section">
                <h2>Storico timbrature dei dipendenti</h2>
                <table id="tabella-timbrature-dipendenti" class="table table-striped">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Cognome</th>
                            <th>Azienda</th>
                            <th>Id Badge</th>
                            <th>Codice Badge</th>
                            <th>Id Timbratura</th>
                            <th>Data Timbratura</th>
                            <th>Ora Timbratura</th>
                            <th>Id Timbratrice</th>
                            <th>Descrizione</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

            <section id="storico-timbrature-mensa-section" class="section">
                <h2>Storico timbrature della mensa</h2>
                <table id="tabella-timbrature-mensa" class="table table-striped">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Cognome</th>
                            <th>Azienda</th>
                            <th>Id Badge</th>
                            <th>Codice Badge</th>
                            <th>Id Timbratura</th>
                            <th>Data Timbratura</th>
                            <th>Ora Timbratura</th>
                            <th>Id Timbratrice</th>
                            <th>Descrizione</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

            <!-- Elenco telefonico dipendenti -->
            <section id="visualizza-elenco-tel-sm-section" class="section">
                <h2>Elenco telefonico sm</h2>
                <table id="contactListTable" class="table table-striped">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Cognome</th>
                            <th>Email</th>
                            <th>Telefono</th>
                            <th>Cellulare</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>
        </main>

    </div>
</body>
<script src="script/dataTables.js"></script>
<script src="script/dashboard.js" defer></script>

</html>